seq(1994:2016)
seq(1994:2016,1)
seq(1994,2016)
CPUE2018<-data.frame(c("Year"=seq(1994,2016),"ShallowCPUE"=c(3.04,3.16,3.37,3.69,3.79,4.12,NA,NA,NA,NA,11.46,12.13,10.38,10.21,8.37,7.34,8.61,8.41,7.81,9.08,9.25,10.65
),"DeepCPUE"=c(0.32,0.20,0.15,0.22,0.22,0.20,0.19,0.25,0.23,0.26,0.22,0.24,0.23,0.22,0.23,0.22,0.19,0.22,0.22,0.25,0.27,0.25)))
View(CPUE2018)
CPUE2018<-data.frame("Year"=seq(1994,2016),"ShallowCPUE"=c(3.04,3.16,3.37,3.69,3.79,4.12,NA,NA,NA,NA,11.46,12.13,10.38,10.21,8.37,7.34,8.61,8.41,7.81,9.08,9.25,10.65
),"DeepCPUE"=c(0.32,0.20,0.15,0.22,0.22,0.20,0.19,0.25,0.23,0.26,0.22,0.24,0.23,0.22,0.23,0.22,0.19,0.22,0.22,0.25,0.27,0.25))
CPUE2018<-data.frame("Year"=seq(1995,2016),"ShallowCPUE"=c(3.04,3.16,3.37,3.69,3.79,4.12,NA,NA,NA,NA,11.46,12.13,10.38,10.21,8.37,7.34,8.61,8.41,7.81,9.08,9.25,10.65
),"DeepCPUE"=c(0.32,0.20,0.15,0.22,0.22,0.20,0.19,0.25,0.23,0.26,0.22,0.24,0.23,0.22,0.23,0.22,0.19,0.22,0.22,0.25,0.27,0.25))
View(CPUE2018)
CPUE2023<-data.frame("Year"=seq(1995,2021),"ShallowCPUE"=c(6.36,6.85,7.80,7.85,7.69,8.07,NA,NA,NA,NA,15.25,16.87,14.16,13.20,10.69,9.74,10.69,9.28,9.31,9.51,10.61,12.29,12.19,10.22,8.86,9.14,7.20),
"DeepCPUE"=c(0.30,0.19,0.12,0.17,0.15,0.13,0.14,0.18,0.16,0.21,0.15,0.16,0.15,0.14,0.15,0.13,0.11,0.13,0.13,0.17,0.18,0.15,0.16,0.16,0.13,0.10,0.11))
ggplot()+
geom_point(aes(x=Year,y=ShallowCPUE),data=CPUE2018,color="black",shape=17)+
geom_point(aes(x=Year,y=DeepCPUE),data=CPUE2018,color="black",shape=17)+
geom_point(aes(x=Year,y=ShallowCPUE),data=CPUE2023,color="grey50",shape=15)+
geom_point(aes(x=Year,y=DeepCPUE),data=CPUE2023,color="grey50",shape=15)+
geom_line(aes(x=Year,y=ShallowCPUE),data=CPUE2018,color="black",linetype="dashed")+
geom_line(aes(x=Year,y=DeepCPUE),data=CPUE2018,color="black",linetype="dashed")+
geom_line(aes(x=Year,y=ShallowCPUE),data=CPUE2023,color="grey50")+
geom_line(aes(x=Year,y=DeepCPUE),data=CPUE2023,color="grey50")+
ggplot()+
geom_point(aes(x=Year,y=ShallowCPUE),data=CPUE2018,color="black",shape=17)+
geom_point(aes(x=Year,y=DeepCPUE),data=CPUE2018,color="black",shape=17)+
geom_point(aes(x=Year,y=ShallowCPUE),data=CPUE2023,color="grey50",shape=15)+
geom_point(aes(x=Year,y=DeepCPUE),data=CPUE2023,color="grey50",shape=15)+
geom_line(aes(x=Year,y=ShallowCPUE),data=CPUE2018,color="black",linetype="dashed")+
geom_line(aes(x=Year,y=DeepCPUE),data=CPUE2018,color="black",linetype="dashed")+
geom_line(aes(x=Year,y=ShallowCPUE),data=CPUE2023,color="grey50")+
geom_line(aes(x=Year,y=DeepCPUE),data=CPUE2023,color="grey50")
library(ggplot2)
ggplot()+
geom_point(aes(x=Year,y=ShallowCPUE),data=CPUE2018,color="black",shape=17)+
geom_point(aes(x=Year,y=DeepCPUE),data=CPUE2018,color="black",shape=17)+
geom_point(aes(x=Year,y=ShallowCPUE),data=CPUE2023,color="grey50",shape=15)+
geom_point(aes(x=Year,y=DeepCPUE),data=CPUE2023,color="grey50",shape=15)+
geom_line(aes(x=Year,y=ShallowCPUE),data=CPUE2018,color="black",linetype="dashed")+
geom_line(aes(x=Year,y=DeepCPUE),data=CPUE2018,color="black",linetype="dashed")+
geom_line(aes(x=Year,y=ShallowCPUE),data=CPUE2023,color="grey50")+
geom_line(aes(x=Year,y=DeepCPUE),data=CPUE2023,color="grey50")
ggplot()+
geom_point(aes(x=Year,y=ShallowCPUE/mean(ShallowCPUE)),data=CPUE2018,color="black",shape=17)+
geom_point(aes(x=Year,y=DeepCPUE/mean(DeepCPUE)),data=CPUE2018,color="black",shape=17)+
geom_point(aes(x=Year,y=ShallowCPUE/mean(ShallowCPUE)),data=CPUE2023,color="grey50",shape=15)+
geom_point(aes(x=Year,y=DeepCPUE/mean(DeepCPUE)),data=CPUE2023,color="grey50",shape=15)+
geom_line(aes(x=Year,y=ShallowCPUE/mean(ShallowCPUE)),data=CPUE2018,color="black",linetype="dashed")+
geom_line(aes(x=Year,y=DeepCPUE/mean(DeepCPUE)),data=CPUE2018,color="black",linetype="dashed")+
geom_line(aes(x=Year,y=ShallowCPUE/mean(ShallowCPUE)),data=CPUE2023,color="grey50")+
geom_line(aes(x=Year,y=DeepCPUE/mean(DeepCPUE)),data=CPUE2023,color="grey50")
ggplot()+
geom_point(aes(x=Year,y=ShallowCPUE/mean(ShallowCPUE)),data=CPUE2018,color="black",shape=17)+
#  geom_point(aes(x=Year,y=DeepCPUE/mean(DeepCPUE)),data=CPUE2018,color="black",shape=17)+
geom_point(aes(x=Year,y=ShallowCPUE/mean(ShallowCPUE)),data=CPUE2023,color="grey50",shape=15)+
#  geom_point(aes(x=Year,y=DeepCPUE/mean(DeepCPUE)),data=CPUE2023,color="grey50",shape=15)+
geom_line(aes(x=Year,y=ShallowCPUE/mean(ShallowCPUE)),data=CPUE2018,color="black",linetype="dashed")+
# geom_line(aes(x=Year,y=DeepCPUE/mean(DeepCPUE)),data=CPUE2018,color="black",linetype="dashed")+
geom_line(aes(x=Year,y=ShallowCPUE/mean(ShallowCPUE)),data=CPUE2023,color="grey50")+
ggplot()+
geom_point(aes(x=Year,y=ShallowCPUE/mean(ShallowCPUE)),data=CPUE2018,color="black",shape=17)+
#  geom_point(aes(x=Year,y=DeepCPUE/mean(DeepCPUE)),data=CPUE2018,color="black",shape=17)+
geom_point(aes(x=Year,y=ShallowCPUE/mean(ShallowCPUE)),data=CPUE2023,color="grey50",shape=15)+
#  geom_point(aes(x=Year,y=DeepCPUE/mean(DeepCPUE)),data=CPUE2023,color="grey50",shape=15)+
geom_line(aes(x=Year,y=ShallowCPUE/mean(ShallowCPUE)),data=CPUE2018,color="black",linetype="dashed")+
# geom_line(aes(x=Year,y=DeepCPUE/mean(DeepCPUE)),data=CPUE2018,color="black",linetype="dashed")+
geom_line(aes(x=Year,y=ShallowCPUE/mean(ShallowCPUE)),data=CPUE2023,color="grey50")
ggplot()+
geom_point(aes(x=Year,y=ShallowCPUE/mean(ShallowCPUE,na.rm=TRUE)),data=CPUE2018,color="black",shape=17)+
#  geom_point(aes(x=Year,y=DeepCPUE/mean(DeepCPUE)),data=CPUE2018,color="black",shape=17)+
geom_point(aes(x=Year,y=ShallowCPUE/mean(ShallowCPUE)),data=CPUE2023,color="grey50",shape=15)+
#  geom_point(aes(x=Year,y=DeepCPUE/mean(DeepCPUE)),data=CPUE2023,color="grey50",shape=15)+
geom_line(aes(x=Year,y=ShallowCPUE/mean(ShallowCPUE)),data=CPUE2018,color="black",linetype="dashed")+
# geom_line(aes(x=Year,y=DeepCPUE/mean(DeepCPUE)),data=CPUE2018,color="black",linetype="dashed")+
geom_line(aes(x=Year,y=ShallowCPUE/mean(ShallowCPUE)),data=CPUE2023,color="grey50")
ggplot()+
geom_point(aes(x=Year,y=ShallowCPUE/mean(ShallowCPUE,na.rm=TRUE)),data=CPUE2018,color="black",shape=17)+
#  geom_point(aes(x=Year,y=DeepCPUE/mean(DeepCPUE)),data=CPUE2018,color="black",shape=17)+
geom_point(aes(x=Year,y=ShallowCPUE/mean(ShallowCPUE,na.rm=TRUE)),data=CPUE2023,color="grey50",shape=15)+
#  geom_point(aes(x=Year,y=DeepCPUE/mean(DeepCPUE)),data=CPUE2023,color="grey50",shape=15)+
geom_line(aes(x=Year,y=ShallowCPUE/mean(ShallowCPUE,na.rm=TRUE)),data=CPUE2018,color="black",linetype="dashed")+
# geom_line(aes(x=Year,y=DeepCPUE/mean(DeepCPUE)),data=CPUE2018,color="black",linetype="dashed")+
geom_line(aes(x=Year,y=ShallowCPUE/mean(ShallowCPUE,na.rm=TRUE)),data=CPUE2023,color="grey50")
ggplot()+
#geom_point(aes(x=Year,y=ShallowCPUE/mean(ShallowCPUE)),data=CPUE2018,color="black",shape=17)+
geom_point(aes(x=Year,y=DeepCPUE/mean(DeepCPUE)),data=CPUE2018,color="black",shape=17)+
#geom_point(aes(x=Year,y=ShallowCPUE/mean(ShallowCPUE)),data=CPUE2023,color="grey50",shape=15)+
geom_point(aes(x=Year,y=DeepCPUE/mean(DeepCPUE)),data=CPUE2023,color="grey50",shape=15)+
#  geom_line(aes(x=Year,y=ShallowCPUE/mean(ShallowCPUE)),data=CPUE2018,color="black",linetype="dashed")+
geom_line(aes(x=Year,y=DeepCPUE/mean(DeepCPUE)),data=CPUE2018,color="black",linetype="dashed")+
# geom_line(aes(x=Year,y=ShallowCPUE/mean(ShallowCPUE)),data=CPUE2023,color="grey50")+
geom_line(aes(x=Year,y=DeepCPUE/mean(DeepCPUE)),data=CPUE2023,color="grey50")
ggplot()+
geom_point(aes(x=Year,y=ShallowCPUE/mean(ShallowCPUE,na.rm=TRUE)),data=CPUE2018,color="black",shape=17)+
geom_point(aes(x=Year,y=ShallowCPUE/mean(ShallowCPUE,na.rm=TRUE)),data=CPUE2023,color="grey50",shape=15)+
geom_line(aes(x=Year,y=ShallowCPUE/mean(ShallowCPUE,na.rm=TRUE)),data=CPUE2018,color="black",linetype="dashed")+
geom_line(aes(x=Year,y=ShallowCPUE/mean(ShallowCPUE,na.rm=TRUE)),data=CPUE2023,color="grey50")+
theme_bw()+
ylab("Deep CPUE")
ggplot()+
geom_point(aes(x=Year,y=ShallowCPUE/mean(ShallowCPUE,na.rm=TRUE)),data=CPUE2018,color="black",shape=17)+
geom_point(aes(x=Year,y=ShallowCPUE/mean(ShallowCPUE,na.rm=TRUE)),data=CPUE2023,color="grey50",shape=15)+
geom_line(aes(x=Year,y=ShallowCPUE/mean(ShallowCPUE,na.rm=TRUE)),data=CPUE2018,color="black",linetype="dashed")+
geom_line(aes(x=Year,y=ShallowCPUE/mean(ShallowCPUE,na.rm=TRUE)),data=CPUE2023,color="grey50")+
theme_bw()+
ylab("Shallow-set CPUE")
ggplot()+
geom_point(aes(x=Year,y=ShallowCPUE/mean(ShallowCPUE,na.rm=TRUE)),data=CPUE2018,color="black",shape=17)+
geom_point(aes(x=Year,y=ShallowCPUE/mean(ShallowCPUE,na.rm=TRUE)),data=CPUE2023,color="grey50",shape=15)+
geom_line(aes(x=Year,y=ShallowCPUE/mean(ShallowCPUE,na.rm=TRUE)),data=CPUE2018,color="black",linetype="dashed")+
geom_line(aes(x=Year,y=ShallowCPUE/mean(ShallowCPUE,na.rm=TRUE)),data=CPUE2023,color="grey50")+
theme_bw()+
ylab("Shallow-set Standardized CPUE")
CPUE2018[1:6,2]/mean(CPUE2018[1:6,2]
)
CPUE2018$ShallowCentered<-c(CPUE2018[1:6,2]/mean(CPUE2018[1:6,2]),NA,NA,NA,NA,CPUE2018[11:22,2]/mean(CPUE2018[11:22,2]))
CPUE2023$ShallowCentered<-c(CPUE2023[1:6,2]/mean(CPUE2023[1:6,2]),NA,NA,NA,NA,CPUE2023[11:27,2]/mean(CPUE2023[11:27,2]))
ggplot()+
geom_point(aes(x=Year,y=ShallowCentered),data=CPUE2018,color="black",shape=17)+
geom_point(aes(x=Year,y=ShallowCentered),data=CPUE2023,color="grey50",shape=15)+
geom_line(aes(x=Year,y=ShallowCentered),data=CPUE2018,color="black",linetype="dashed")+
geom_line(aes(x=Year,y=ShallowCentered),data=CPUE2023,color="grey50")+
theme_bw()+
ylab("Shallow-set Standardized CPUE")
ggplot()+
geom_point(aes(x=Year,y=DeepCPUE/mean(DeepCPUE)),data=CPUE2018,color="black",shape=17)+
geom_point(aes(x=Year,y=DeepCPUE/mean(DeepCPUE)),data=CPUE2023,color="grey50",shape=15)+
geom_line(aes(x=Year,y=DeepCPUE/mean(DeepCPUE)),data=CPUE2018,color="black",linetype="dashed")+
geom_line(aes(x=Year,y=DeepCPUE/mean(DeepCPUE)),data=CPUE2023,color="grey50")+
theme_bw()+
ylab("Deep-set Standardized CPUE")
png("ShallowCompared.png",height=4,width=8,units="in",res=200)
ggplot()+
geom_point(aes(x=Year,y=ShallowCentered),data=CPUE2018,color="black",shape=17)+
geom_point(aes(x=Year,y=ShallowCentered),data=CPUE2023,color="grey50",shape=15)+
geom_line(aes(x=Year,y=ShallowCentered),data=CPUE2018,color="black",linetype="dashed")+
geom_line(aes(x=Year,y=ShallowCentered),data=CPUE2023,color="grey50")+
theme_bw()+
ylab("Shallow-set Standardized CPUE")
dev.off()
png("DeepCompared.png",height=4,width=8,units="in",res=200)
ggplot()+
geom_point(aes(x=Year,y=DeepCPUE/mean(DeepCPUE)),data=CPUE2018,color="black",shape=17)+
geom_point(aes(x=Year,y=DeepCPUE/mean(DeepCPUE)),data=CPUE2023,color="grey50",shape=15)+
geom_line(aes(x=Year,y=DeepCPUE/mean(DeepCPUE)),data=CPUE2018,color="black",linetype="dashed")+
geom_line(aes(x=Year,y=DeepCPUE/mean(DeepCPUE)),data=CPUE2023,color="grey50")+
theme_bw()+
ylab("Deep-set Standardized CPUE")
dev.off()
library(r4ss)
library(ss3diags)
library(reshape2)
library(ggplot2)
base.dir<-"C://users//michelle.sculley//documents//2023 SWO ASSESS//ModelDev"
current.dir<-paste0(base.dir, "//Current Best")#//F9 Cubic Spline")
setwd(base.dir)
plotdir<-paste0(current.dir,"//plots")
base.model<-SS_output(current.dir)
SS_plots(base.model, html = TRUE, png = TRUE, pdf=TRUE, catchasnumbers = TRUE)
SS_plots(base.model, html = TRUE, png = FALSE, pdf=TRUE, catchasnumbers = TRUE)
SS_plots(base.model, html = FALSE, png = FALSE, pdf=TRUE, catchasnumbers = TRUE)
#| echo: false
library(r4ss)
library(ss3diags)
library(ggplot2)
library(reshape2)
library(scales)
library(RColorBrewer)
library(gridExtra)
library(dplyr)
library(tidyr)
base.dir<-"C://users//michelle.sculley//documents//2023 SWO ASSESS//ModelDev"
current.dir<-paste0(base.dir, "//Current Best")#//F9 Cubic Spline")
setwd(base.dir)
plotdir<-paste0(current.dir,"//plots")
base.model<-SS_output(current.dir)
startyear = 1975
endyear = 2021
rnames <- base.model$derived_quants$Label
SummBio<-base.model$timeseries[,c("Yr","Seas","Bio_all","Bio_smry","SpawnBio","Recruit_0")]
SumBioAll<-subset(SummBio,Seas==1)[,c("Yr","Bio_all")]
SumBiosmry<-subset(SummBio,Seas==1)[,c("Yr","Bio_smry")]
## create summary biomass figure
ggplot()+
geom_point(aes(x=Yr,y=Bio_smry), data=SumBiosmry,size=4)+
geom_line(aes(x=Yr,y=Bio_smry), data=SumBiosmry[-1,],size=1)+
ylab("Biomass (mt, ages 1+)") +
xlab("Year")+
theme(axis.text.x=element_text(size=24,face="bold"), axis.title.x=element_text(size=30,face="bold"),
axis.text.y=element_text(size=24,face="bold"),axis.title.y=element_text(size=30,face="bold"),
panel.border = element_rect(color="black",fill=NA,size=2),
panel.background = element_blank())+
scale_x_continuous(breaks=seq(startyear,endyear,5)) +
scale_y_continuous(limits = c(0,50000),label = comma)
dev.off()
ggplot()+
geom_point(aes(x=Yr,y=Bio_smry), data=SumBiosmry,size=4)+
geom_line(aes(x=Yr,y=Bio_smry), data=SumBiosmry[-1,],size=1)+
ylab("Biomass (mt, ages 1+)") +
xlab("Year")+
theme(axis.text.x=element_text(size=24,face="bold"), axis.title.x=element_text(size=30,face="bold"),
axis.text.y=element_text(size=24,face="bold"),axis.title.y=element_text(size=30,face="bold"),
panel.border = element_rect(color="black",fill=NA,size=2),
panel.background = element_blank())+
scale_x_continuous(breaks=seq(startyear,endyear,5)) +
scale_y_continuous(limits = c(0,50000),label = comma)
summary(SumBiosmry)
ggplot()+
geom_point(aes(x=Yr,y=Bio_smry), data=SumBiosmry,size=4)+
geom_line(aes(x=Yr,y=Bio_smry), data=SumBiosmry[-1,],size=1)+
ylab("Biomass (mt, ages 1+)") +
xlab("Year")+
theme(axis.text.x=element_text(size=24,face="bold"), axis.title.x=element_text(size=30,face="bold"),
axis.text.y=element_text(size=24,face="bold"),axis.title.y=element_text(size=30,face="bold"),
panel.border = element_rect(color="black",fill=NA,size=2),
panel.background = element_blank())+
scale_x_continuous(breaks=seq(startyear,endyear,5)) +
scale_y_continuous(limits = c(0,300000),label = comma)
base.model<-SS_output(current.dir, verbose = FALSE, printstats=FALSE)
base.dir<-"C://users//michelle.sculley//documents//2023 SWO ASSESS"
current.dir<-paste0(base.dir, "//ModelDev//Current Best")#//F9 Cubic Spline")
setwd(base.dir)
source(file.path(base.dir,"Rscripts","002_SummaryFigs"))
source(file.path(base.dir,"/Rscripts","/002_SummaryFigs"))
source(file.path(base.dir,"Rscripts","002_SummaryFigs.R"))
BioSumFig
base.dir
library(r4ss, quietly=T, warn.conflicts = F)
